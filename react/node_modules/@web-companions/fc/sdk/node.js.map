{"version":3,"file":"node.js","sourceRoot":"","sources":["../../src/sdk/node.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,EAAE,EAAE,MAAM,EAAE,MAAM,UAAU,CAAC;AAMtC,MAAM,UAAU,EAAE,CAAoB,MAAyB;IAC7D,OAAO,CAAI,IAA0C,EAAE,EAAE;QACvD,OAAO,CAAC,OAA2B,EAAE,EAAE;YACrC,MAAM,OAAO,GAAG,IAAI,OAAO,EAAE,CAAC;YAE9B,OAAO,CAAC,KAAQ,EAAE,EAAE;gBAClB,MAAM,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC7C,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBAE3B,IAAI,GAAG,KAAK,SAAS,EAAE;oBACrB,MAAM,KAAK,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC,CAAM,EAAE,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;oBAE1D,GAAG,GAAG,CAAC,CAAC,GAAG,KAAK,EAAE,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;oBAE5D,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;iBACvB;gBAED,OAAO,GAAG,CAAC,KAAK,CAAC,CAAC;YACpB,CAAC,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC,CAAC;AACJ,CAAC","sourcesContent":["import { AF, useRef } from '../hooks';\nimport type { ComponentFunc, NodeIniConfig } from '../common.model';\n\n/**\n * Initialize Node Generator\n */\nexport function NG<FP, RT>(this: any, config: NodeIniConfig<RT>) {\n  return <P>(func: ComponentFunc<P extends FP ? P : FP>) => {\n    return (refNode?: { current: Node }) => {\n      const node2Fn = new WeakMap();\n\n      return (props: P) => {\n        const ref = refNode ? refNode : useRef(null);\n        let rFn = node2Fn.get(ref);\n\n        if (rFn === undefined) {\n          const aFunc = AF(func, (r: any) => config.render(r, ref));\n          \n          rFn = (p = props) => Reflect.apply(aFunc, ref.current, [p]);\n\n          node2Fn.set(ref, rFn);\n        }\n\n        return rFn(props);\n      };\n    };\n  };\n}\n"]}